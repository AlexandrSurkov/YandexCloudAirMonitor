# Данный проект - пример реализации простой системы Интернета вещей на технологиях Яндекса.

Более подробно узнать про проект можно в статье на Хабре.

На примере данного проекта вы сможете узнать как использовать сервисы Яндекс.Облака для
 - Работы с устройствами
 - Приема, обработки и хранения данных
 - Визуализации данных от устройств и настройки алертов
 - Интеграции с [Умным домом Яндекса](https://yandex.ru/alice/smart-home).

В качестве IoT устройства будем используем собранный на базе ESP8266 датчик параметров воздуха, измеряющий следующие величины:
 - Влажность
 - Давление
 - Температура
 - Концентрация CO2
 
Эти данные мы будем складывать в базу данных PostgreSQL, создадим дашборды и оповещения в Яндекс.Монитоинге и BI сервисе DataLens, а также настроим интеграцию с Алисой таким образом, чтобы она озвучивала нам значения с нашего датчика.
 
Датчик отправлет данные в формате JSON один раз в каждые 10 секунд.

Пример данных от устройства:
```json
{
  "DeviceId":"are123deviceid",
  "Values":
  [
    {"Type":"Float","Name":"Humidity","Value":"25.281837"},
    {"Type":"Float","Name":"CarbonDioxide","Value":"67.96608"},
    {"Type":"Float","Name":"Pressure","Value":"110.7021"},
    {"Type":"Float","Name":"Temperature","Value":"127.708824"}
  ]
}
```

Данные от устройства будут отправляться в [Yandex IoT Core](https://cloud.yandex.ru/services/iot-core) откуда с помощью [Yandex Cloud Functions](https://cloud.yandex.ru/services/functions) передаются в:
- [Yandex.Monitoring](https://cloud.yandex.ru/services/monitoring) - сервис, где можно создать дашборд с оперативными данными от датчика и настроить оповещения (по email или СМС) о событиях. 
- [Yandex Managed Service for PostgreSQL](https://cloud.yandex.ru/services/managed-postgresql) - кластер базы данных на основе СУБД PostgreSQL, в котором будет храниться история изменения показаний датчиков

Дополнительно мы сделаем дашборд в DataLens, который позволит просмотривать исторические данные из PostgreSQL.
Также с помощью Yandex Cloud Functons мы сделаем интеграцию с Умным Домом Яндекса и научим Алису озвучивать показания нашего датчика.

Причем интеграция с Алисой и отправка данных в Yandex.Monitoring будет сделана на полностью бессерверной архитектуре - без использования виртуальных машин.

Если вам не удобно собирать датчик, то вы можее использовать один из двух эмуляторов:
 - На базе Yandex Cloud Functions на NodeJS
 - На .NET Core на языке C#
 
В качестве эмулятора в статье используется EnvironmentalSensor из https://github.com/AlexandrSurkov/IoTDeviceEmulator

## Подробнее про каждую часть проекта
 - Настройка Yandex IoT Core
 - [Сборка устройства](https://github.com/AlexandrSurkov/YandexCloudAirMonitor/wiki/%D0%A1%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0)
 - Использование эмулятора
 - Функция для отправки данных в Yandex Monitoring
 - Настройка Yandex Monitoring
 - Функция для отправки данных в PostgreSQL
 - Настройка DataLens
 - Функция для Интеграции с Умным Домом Яндекса
 - Настройка Умного Дома Яндекса

